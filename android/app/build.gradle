apply plugin: "com.android.application"
apply plugin: "org.jetbrains.kotlin.android"
apply plugin: "com.facebook.react"


react {


    /* Autolinking */
    autolinkLibrariesWithApp()
}


def enableProguardInReleaseBuilds = false


def jscFlavor = 'io.github.react-native-community:jsc-android:2026004.+'

android {
    ndkVersion rootProject.ext.ndkVersion
    buildToolsVersion rootProject.ext.buildToolsVersion
    compileSdk rootProject.ext.compileSdkVersion

    namespace "vinelight.ceremony.journal.meditation.timer"
    defaultConfig {
        applicationId "vinelight.ceremony.journal.meditation.timer"
        minSdkVersion rootProject.ext.minSdkVersion
        targetSdkVersion rootProject.ext.targetSdkVersion
        versionCode 9
        versionName "1.9"
        multiDexEnabled true
        missingDimensionStrategy "store", "play"
        def date = new Date();
        def newName = date.format('MMM-dd-yyyy')
        setProperty("archivesBaseName","Vinelight"+versionName+"_"+newName)
    }
    signingConfigs {
        // debug {
        //     storeFile file('debug.keystore')
        //     storePassword 'android'
        //     keyAlias 'androiddebugkey'
        //     keyPassword 'android'
        // }
         release {
             storeFile file('vinelight.jks')
             storePassword 'vinelight'
             keyAlias 'key0'
             keyPassword 'vinelight'
         }
    }
    buildTypes {
        // debug {
        //     signingConfig signingConfigs.debug
        // }
        release {
        
            signingConfig signingConfigs.release
            minifyEnabled enableProguardInReleaseBuilds
            proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
        }
    }
}

dependencies {

    def billing_version = "7.1.1"
    implementation("com.facebook.react:react-android")
    implementation "com.android.billingclient:billing:$billing_version"
    implementation project(':react-native-vector-icons')
    implementation project(':react-native-iap')
    implementation project(':react-native-keep-awake')
    if (hermesEnabled.toBoolean()) {
        implementation("com.facebook.react:hermes-android")
    } else {
        implementation jscFlavor
    }
}
apply from: file("../../node_modules/react-native-vector-icons/fonts.gradle")